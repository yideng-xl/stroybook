# ALIGNMENT: MVP1 - 幼儿绘本网站 (纯前端版)

## 1. 项目背景与目标
**目标**: 构建一个幼儿绘本 Web 应用，实现 PC、Pad、Mobile 多端自适应展示。
**核心数据源**: 位于 Web 应用同级目录的 `stories/` 文件夹。
**当前阶段**: MVP1 (纯前端实现)。

## 2. 原始需求分析
- **核心功能**:
    - 绘本展示：封面列表、详情阅读。
    - 交互体验：中英文内容切换。
    - 查询功能：支持按“故事名称”搜索，按“绘本风格”筛选。
    - 响应式设计：适配 PC、Pad、Mobile。
- **技术约束**:
    - MVP1 为纯前端实现 (No Backend)。
    - 数据来源于本地文件系统结构。

## 3. 现有数据模型分析 (基于 stories 目录)
通过分析 `stories/灰姑娘/story.json` 等文件，确定数据结构如下：
- **Story (故事)**:
    - 包含标题 (中/英)、默认风格等元数据。
    - 包含页面列表 (Pages)，每页有中文文本、英文文本。
- **Style (风格)**:
    - 故事目录下有子文件夹（如“迪士尼”、“黏土动画”），代表不同风格。
    - 风格目录下包含图片 (`page-1.png`...) 和 Prompts (`imagePrompt-page1.json`)。
    - **推断**: 一个故事可以有多个风格版本，图片路径需动态拼接。

## 4. 技术方案草案 (Proposed Architecture)

### 4.1 技术栈推荐
- **框架**: React 18 + TypeScript (主流、健壮)。
- **构建工具**: Vite (快速、支持静态资源处理)。
- **UI 库**: Tailwind CSS (实现多端自适应的最佳选择) + Headless UI (可选，用于无障碍组件)。
- **路由**: React Router v6。
- **翻页库**: `react-pageflip` (用于 PC/Pad 仿真翻页)。

### 4.2 关键技术挑战与解决方案
**挑战**: 浏览器环境无法直接遍历本地文件系统 (`stories/` 目录)。
**解决方案**: **动态索引机制 (Dynamic Indexing)**
1.  **扫描脚本**: 编写一个 Node.js 脚本 (`scripts/scan-stories.js`)。
2.  **索引生成**: 该脚本遍历 `../stories` 目录，提取所有 `story.json` 和风格信息，生成 `public/story-manifest.json` 文件。
3.  **动态更新**: 当用户添加新故事后，运行此脚本更新索引。前端无需重新构建 (Rebuild)，只需重新获取 `story-manifest.json` 即可感知新内容。
4.  **资源访问**:
    - **开发模式**: Vite 允许访问 `../stories`。
    - **生产构建**: 部署时需配置 Web Server (如 Nginx/Apache) 将 `/stories` 路径映射到物理 `stories` 目录，或在构建时使用脚本将资源复制到 `dist`。鉴于 MVP1 纯前端且要求“不重启服务”，推荐使用 **Symlink (软链接)** 或 **Web Server 别名配置**，但在纯静态托管场景下，最稳妥的方式是**构建时复制** + **增量更新脚本**。
    - **本次决策**: 采用 **扫描脚本生成索引** 方式。每次新增故事，运行扫描脚本 -> 刷新页面。

## 5. 已确认决策点 (Key Decisions)

### 5.1 交互设计
1.  **首页展示**:
    - 展示“故事”卡片。
    - 点击进入默认风格（通常是第一个），阅读页内提供“风格切换”下拉菜单。
2.  **阅读模式**:
    - **PC / Pad**: 仿真翻页 (Flipbook)。
    - **Mobile**: 上下滑动 (Vertical Scroll)。

### 5.2 动态性需求
- 目录结构：前端工程在 `web/`，故事数据在 `stories/`。
- 动态加载：不重启服务。通过运行 `scan` 脚本更新 `public/story-index.json`，前端动态读取该 JSON 实现内容更新。

## 6. 下一步计划
1.  生成 MVP1 共识文档 (CONSENSUS_MVP1.md)。
2.  进行系统架构设计 (DESIGN_MVP1.md)。